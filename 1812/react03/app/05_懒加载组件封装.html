<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="./lib/react.development.js"></script>
    <script src="./lib/react-dom.development.js"></script>
    <script src="./lib/babel.min.js"></script>
    <title>Document</title>
    <style>
        *{margin: 0;
        padding: 0;}
        img{
            width: 100%;
            height: 800px;
        }
    </style>
</head>
<body>
    <div id="app">

    </div>
</body>
<script src="./lazy.js" type="text/babel"></script>
<script type="text/babel">
    let app = document.querySelector("#app")
    let imgUrl = ["./01.jpg","./02.jpg","./03.png","./04.jpg","./05.jpg"];
    // class LazyImg extends React.Component {
    //     constructor(){
    //         super();
    //         this.state = {
    //             imgUrl,
    //             lazyUrl:[]
    //         }
    //     }
    //     render(){
    //         return <ul ref="uls">
    //             {this.state.imgUrl.map((item,index)=>{
    //                 return <li key={index}>
    //                     {index==0?<img src={item} />:<img _src={item} src={this.state.lazyUrl[index]} />}
    //                 </li>
    //             })}    
    //         </ul>
    //     }
    //     componentDidMount(){
    //         const that = this;
    //         let elArr = Array.from(this.refs.uls.children);
    //         let heightArr = elArr.map((item,index)=>{
    //             return item.offsetTop
    //         })
    //         console.log(heightArr)
            
    //         document.body.onscroll = function(ev){
    //             console.log(document.documentElement.scrollTop,document.body.scrollHeight,
    //             window.innerHeight);
    //             let h = document.documentElement.scrollTop+window.innerHeight;
    //             heightArr.forEach((item,index)=>{
    //                 if(item<=h){
    //                     that.state.lazyUrl[index] = that.state.imgUrl[index];
    //                 }
    //             })
    //             that.setState({
    //                 lazyUrl:that.state.lazyUrl
    //             })
    //         }
    //     }
    // }
    ReactDOM.render(<ul>
            {imgUrl.map((item,index)=>{
                return <li key={index}>
                    <LazyImg isLazy={index!=0} url={item} handleload={(img)=>{
					console.log(img);
				}} /></li>
            })}
    </ul> , app);

</script>
</html>